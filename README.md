# Auto Route Finder

A VSCode extension that helps Flutter developers easily jump to the definition of classes generated by the [AutoRoute package](https://pub.dev/packages/auto_route).


## Features

- **Automatic Route Detection**: Monitors Dart files for `*Route` class names (e.g., `HomeRoute`, `SettingsRoute`)
- **Inline CodeLens (smart)**: Displays "Jump to Definition" only when the corresponding widget file can be resolved from `routes.gr.dart`
- **Indexed Discovery (no hardcoding)**: Uses VS Codeâ€™s workspace index to discover `routes.gr.dart` anywhere in the workspace (no hardcoded paths)
- **Multi-file Support**: Handles multiple `routes.gr.dart` files; the correct file is resolved by searching all indexed results
- **Smart Navigation**: Converts widget names to snake_case, resolves imports from `routes.gr.dart`, maps `package:â€¦` to `lib/â€¦`, and opens the widget file
- **Real-time Updates**: Refreshes automatically when any `routes.gr.dart` file is saved
- **Zero Configuration**: Works out of the box with standard AutoRoute setups

![Preview](assets/preview.png)

## How It Works

1. **Discovery**: On activation, the extension uses VS Code indexing to find all `routes.gr.dart` files (`workspace.findFiles('**/routes.gr.dart', â€¦)`).
2. **CodeLens Display**: When a Dart file with `*Route` tokens is opened, the provider:
   - Converts the inferred widget name (e.g., `CompaniesScreen`) to snake_case (`companies_screen`).
   - Searches all discovered `routes.gr.dart` files for an import that contains that snake_case name.
   - If a matching import is found and the file exists locally, shows a "ðŸ”— Jump to â€¦" CodeLens.
3. **Navigation**: Clicking the CodeLens opens the file and focuses the widget class definition.

If no `routes.gr.dart` is found in the workspace, a notification is shown on activation.

## Requirements

- Flutter project using AutoRoute
- A generated `routes.gr.dart` present somewhere in the workspace (typically `lib/routes.gr.dart`)

## Usage

1. **Install the extension**
2. **Open a Dart file** containing route references (e.g., `CompaniesRoute()`)
3. **Look for the CodeLens button** above the route class (e.g., "ðŸ”— Jump to CompaniesScreen")
4. **Click the button** to navigate to the corresponding widget file

## Example

```dart
// In your Dart file
context.router.push(const CompaniesRoute());

// The extension will:
// 1. Detect CompaniesRoute
// 2. Show "ðŸ”— Jump to CompaniesScreen" button
// 3. When clicked, find this import in routes.gr.dart:
//    import 'package:myapp/features/companies/screens/companies_screen.dart' as _i4;
// 4. Convert to: lib/features/companies/screens/companies_screen.dart
// 5. Open the file and focus on the CompaniesScreen class
```

## File Structure Support

The extension automatically handles various project structures by reading import paths from `routes.gr.dart`:

```
lib/
â”œâ”€â”€ routes.gr.dart
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ companies/
â”‚   â”‚   â””â”€â”€ screens/
â”‚   â”‚       â””â”€â”€ companies_screen.dart
â”‚   â””â”€â”€ profile/
â”‚       â””â”€â”€ screens/
â”‚           â””â”€â”€ profile_detail_screen.dart
â””â”€â”€ main.dart
```

## Troubleshooting

### No CodeLens Buttons Appear

1. **Ensure at least one routes.gr.dart exists**: The extension shows a notification if none are found.
2. **Verify AutoRoute generation**: Make sure your routes are generated and imports exist for your widgets.
3. **Open the correct workspace root**: Discovery runs from the VS Code workspace folder(s).

### "No file path found" Error

1. **Check import statements** in your `routes.gr.dart` for the target widget (snake_case match).
2. **Verify file naming**: Widget files should be in snake_case (e.g., `companies_screen.dart`).
3. **Confirm file exists** at the path resolved from the import (`package:â€¦` â†’ `lib/â€¦`).

### Multi-root or multiple `routes.gr.dart`

- The extension scans all discovered `routes.gr.dart` files and uses the first matching import.
- If you have multiple apps/packages, ensure imports are unambiguous.

### Limitations
- The extension will only work when Screens are in its own file, not in the file that is named differently the the screen widget name.
Example:
```dart
// file name: home_screen.dart

@RoutePage()
class HomeScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Container();
  }
}
```

## Debugging

- Open **Help > Toggle Developer Tools** to view logs.
- Look for messages prefixed with "Auto Route Finder:" when resolving imports and opening files.

## Release Notes

### 0.0.2
- Added VS Code indexed discovery for `routes.gr.dart` (no hardcoded paths)
- Multi-file support for workspaces with more than one `routes.gr.dart`
- CodeLens only shows when the widget file is resolvable from `routes.gr.dart`
- Notification when no `routes.gr.dart` is found

### 0.0.1
- Initial release with import-based navigation, snake_case conversion, and CodeLens

## Contributing

Contributions are welcome! Please feel free to submit issues and pull requests.

## License

MIT License - see LICENSE file for details.